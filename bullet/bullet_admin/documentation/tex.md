# TeX Document Generation

The system allows you to generate documents based on TeX templates. This can be used to generate certificates and other documents. The documents are compiled using [Tectonic](https://tectonic-typesetting.github.io/en-US/), which allows you to use any standard TeXLive packages.

## TeX Templates

On the [TeX Templates page](/admin/tex/templates/), you can find and manage all available templates for the current competition.

A template is made from the following data:

* Name: name of the template that gets shown in the admin interface
* Type: the type of the template
  * Multiple teams: Used for generating documents for multiple teams at once, like certificates.
  * Single team: Used for generating documents for a single team.
  * Generic: Used for generating other documents that do not require team data.
* Main .tex file: The name of the TeX file that should be compiled.
* Sources archive: A ZIP archive containing all files required to build the document.

### Templating

If the system finds a file that's name ends with `.j2`, it considers it as a Jinja2 template. This enables you to use control sequences like loops, conditionals and more. More details can be found in [Jinja2 documentation](https://jinja.palletsprojects.com/en/3.1.x/templates/).

Jinja2 by default uses `{}` for its control sequences. Because TeX uses curly braces for its commands, we use these non-default delimiters instead:

* `(@` and `@)` for statements
* `(*` and `*)` for variables
* `(%` and `%)` for comments

For example, the following code snippet would generate a list of teams:

<pre>
\begin{enumerate}
(@ for team in teams @)
\item (* team.display_name *)
(@ endfor @)
\end{enumerate}
</pre>

### Team-based Templates

Templates with types "Single team" and "Multiple teams" receive the team data in variable `team` and `teams`, respectively. The individual teams have the same data that a JSON export would produce.

## Generating Certificates

Certificates can be generated by going into Venues, then selecting some venue and accessing the "Certificates" tab. Here, you can select the TeX template and the number of teams you want to generate the certificates for.

## Generating Documents for Single Team

"Single team" templates can be used by opening the team in the administration interface and clicking on the "Generate document" button. Then, you can choose which template you would like to use. We allow you to use "Multiple teams" templates here, in which case they get a list of teams that contain only the one selected team.

## Generating Generic Documents

Generation of documents that are not based on team data can be done by clicking on the play icon in the TeX Template list. You can provide any additional context you would like to provide to the template as an JSON object.
